<!-- register.component.html (corrigido + select humanWhatsapp) -->
<div class="register-page">
  <div class="card register-card shadow-lg">
    <div *ngIf="editing" class="d-flex justify-content-between align-items-center mb-3">
      <button type="button" class="btn btn-outline-secondary" (click)="goBack()">
        ‚Üê Voltar
      </button>

      <span class="text-muted small"></span>
    </div>

    <h3 class="text-center mb-4">
      {{ editing ? 'Editar conta' : 'Crie a sua conta' }}
    </h3>

    <form (ngSubmit)="submit()" #f="ngForm">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Nome Completo</label>
          <input class="form-control" name="fullName" [(ngModel)]="model.fullName" required />
        </div>

        <div class="col-md-6 mb-3" *ngIf="!editing">
          <label class="form-label">Email</label>
          <input type="email" class="form-control" name="email" [(ngModel)]="model.email" required />
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3" *ngIf="!editing">
          <label class="form-label">Senha</label>
          <input type="password" class="form-control" name="passwordHash" [(ngModel)]="model.passwordHash" required />
        </div>

        <div class="col-md-6 mb-3" [class.col-md-12]="editing">
          <label class="form-label">
            Informe um n√∫mero v√°lido com DDD e WhatsApp ativo
            <span class="text-muted">(para atendimento humano no WhatsApp, se ativado abaixo)</span>
          </label>

          <input
            class="form-control"
            name="phoneNumber"
            [(ngModel)]="model.phoneNumber"
            mask="+00 00 00000-0000"
            placeholder="+55 11 91234-5678"
            required
          />
        </div>
      </div>

      <!-- ‚úÖ NOVO: Select humanWhatsapp -->
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Ativar bot√£o de WhatsApp (atendimento humano)?</label>
          <select class="form-select" name="humanWhatsapp" [(ngModel)]="model.humanWhatsapp" required>
            <option value="yes">Sim (mostrar bot√£o no widget)</option>
            <option value="no">N√£o (n√£o mostrar bot√£o)</option>
          </select>

          <small class="text-muted d-block mt-1">
            Se ativado, o widget exibir√° um bot√£o ‚ÄúWhatsApp‚Äù para conversa normal com humano (se dispon√≠vel).
          </small>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Nome da Empresa</label>
        <input class="form-control" name="companyName" [(ngModel)]="model.companyName" required />
      </div>

      <div class="mb-3">
        <label class="form-label">Endere√ßo do Site (https://www.exemplo.com.br)</label>
        <input class="form-control" name="companyWebsiteUrl" [(ngModel)]="model.companyWebsiteUrl" required />
      </div>

      <div class="mb-3 prompt-block">
        <label class="form-label" for="promptText">Informa√ß√µes para melhorar o atendimento</label>

        <div class="prompt-hint" *ngIf="!editing">
          <div class="prompt-hint-title">O que escrever aqui?</div>
          <p>
            Coloque informa√ß√µes que ajudem a responder seus clientes com mais precis√£o.
            Pense no que eles perguntam com frequ√™ncia.
          </p>

          <div class="prompt-hint-examples">
            <div class="prompt-hint-examples-title">Exemplos:</div>
            <ul>
              <li>Meu telefone de contato √© +55 (61) 9999999</li>
              <li>Meu email para contato √© email@email.com</li>
              <li>Hor√°rio: segunda a s√°bado, 08h √†s 20h (exceto feriados)</li>
              <li>Vendemos roupas femininas e masculinas</li>
              <li>Fechamos √†s 20h</li>
            </ul>
          </div>
        </div>

        <textarea
          id="promptText"
          class="form-control"
          rows="4"
          name="promptText"
          [(ngModel)]="model.promptText"
          required
        ></textarea>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Idioma</label>
          <select class="form-select" name="languageCode" [(ngModel)]="model.languageCode" required>
            <option value="pt-BR">Portugu√™s (Brasil)</option>
            <option value="pt-PT">Portugu√™s (Portugal)</option>
            <option value="en-US">English</option>
          </select>
        </div>

        <div class="col-md-6 mb-3" *ngIf="!editing">
          <label class="form-label">Ramo</label>
          <select class="form-select" name="vertical" [(ngModel)]="model.vertical" required>
            <option value="ecommerce">E-commerce</option>
            <option value="clinic">Cl√≠nica</option>
            <option value="salon">Sal√£o</option>
            <option value="general">Outros</option>
          </select>
        </div>
      </div>

      <div *ngIf="error" class="alert alert-danger mt-3" style="white-space: pre-line;">
        {{ error }}
      </div>

      <div *ngIf="success" class="alert alert-success mt-3">
        Conta criada com sucesso üéâ
      </div>

      <button class="btn btn-primary w-100 mt-3" [disabled]="loading || !f.valid">
        {{ loading ? (editing ? 'Salvando...' : 'Criando conta...') : (editing ? 'Salvar altera√ß√µes' : 'Salvar') }}
      </button>
    </form>
  </div>
</div>